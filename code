#include <stdio.h>
char u1[10],u2[10];

void print(char board[][3]){
    printf("\n\n   \033[1;34m|   |    \n");
    printf(" \033[0;31m%c \033[1;34m| \033[0;31m%c \033[1;34m| \033[0;31m%c ",board[0][0],board[0][1],board[0][2]);
    printf("\n\033[1;34m___|___|___\n");
    printf("   \033[1;34m|   |   \n");
    printf(" \033[0;31m%c \033[1;34m| \033[0;31m%c \033[1;34m| \033[0;31m%c ",board[1][0],board[1][1],board[1][2]);
    printf("\n\033[1;34m___|___|___\n");
    printf("   \033[1;34m|   |    \n");
    printf(" \033[0;31m%c \033[1;34m| \033[0;31m%c \033[1;34m| \033[0;31m%c ",board[2][0],board[2][1],board[2][2]);
    printf("\n   \033[1;34m|   |   \n");
     printf("\033[0m");
}

void read(int turn,char board[][3]){
    int row,coloum;
    printf("(enter row and coloum no) :");
    scanf("%d %d",&row,&coloum);
    if((row>=1&&row<=3) && (coloum>=1&&coloum<=3) && (board[row-1][coloum-1]==' ')){
        
        board[row-1][coloum-1]=turn?'X':'O';
    }
    else{
        printf("\033[0;31mINVALID MOVE!!\nchoose other block.\033[0m\n");
        read(turn,board);
    }
}

void check(int *turn,int *x,char board[][3]){
    for(int i=0;i<3;i++){
        if(board[i][0]!=' '&&board[i][0]==board[i][1]&&board[i][1]==board[i][2]){
            printf("\033[1;32m\n\n%s is winner!!\n\033[0m",*turn%2?u2:u1);
            *x=0;
        }
        else if(board[0][i]!=' '&&board[0][i]==board[1][i]&&board[1][i]==board[2][i]){
            printf("\033[1;32m\n\n%s is winner!!\n\033[0m",*turn%2?u2:u1);
            *x=0;
        }
    }
    if(board[0][0]!=' '&&board[0][0]==board[1][1]&&board[1][1]==board[2][2]){
        printf("\033[1;32m\n\n%s is winner!!\n\033[0m",*turn%2?u2:u1);
        *x=0;
    }
    else if(board[0][2]!=' '&&board[0][2]==board[1][1]&&board[1][1]==board[2][0]){
        printf("\033[1;32m\n\n%s is winner!!\n\033[0m",*turn%2?u2:u1);
        *x=0;
    }
    else if(*turn==8){
        printf("\033[1;33m\n\n***** MATCH IS DRAW *****\n\033[0m");
        *x=0;
    }

}

void restart(int *turn,int *x,int *n,char board[][3]){
    *turn=*n;
    *x=1;
    for(int i=0;i<3;i++){
        for(int j=0;j<3;j++){
            board[i][j]=' ';
        }
    }

}


int main()
{
    char board[3][3];
    int turn=0,x=1,count=1,n=1;
    for(int i=0;i<3;i++){
        for(int j=0;j<3;j++){
            board[i][j]=' ';
        }
    }
    printf("enter player1 name:");
    scanf("%s",u1);
    printf("\nenter player2 name:");
    scanf("%s",u2);
    
    
    while(count){
        printf("\n\033[1;33;44m            NOW GAME IS START            \033[0m\n\n");
        print(board);
        while(x){
            printf("%s's turn ",turn%2?u2:u1);
            read(turn%2,board);
            print(board);
            check(&turn,&x,board);
            turn++;
        }
        printf("\n\nif you you want to play again enter 1 ,otherwish 0:\n");
        scanf("%d",&count);
        if(count){
            restart(&turn,&x,&n,board);
            n++;
        }
    }
    return 0;
}
